<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8">
	<meta http-equiv="cache-control" content="no-cache" />
	<meta http-equiv="Pragma" content="no-cache" />
	<meta http-equiv="Expires" content="-1" />
	<title>AskAround Account Settings</title>

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="description" content="" />
	<meta name="keywords" content="" />
	<link rel="stylesheet" type="text/css" href="css/animate.css">
	<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
	<link rel="stylesheet" type="text/css" href="css/line-awesome.css">
	<link rel="stylesheet" type="text/css" href="css/line-awesome-font-awesome.min.css">
	<link rel="stylesheet" type="text/css" href="css/font-awesome.min.css">
	<link rel="stylesheet" type="text/css" href="css/jquery.mCustomScrollbar.min.css">
	<link rel="stylesheet" type="text/css" href="lib/slick/slick.css">
	<link rel="stylesheet" type="text/css" href="lib/slick/slick-theme.css">
	<link rel="stylesheet" type="text/css" href="css/style.css">
	<link rel="stylesheet" type="text/css" href="css/responsive.css">

	<link rel="shortcut icon" href="images/favicon - 32px x 32px.png" />

	<link rel="manifest" href="manifest.json">

	<script src="https://www.gstatic.com/firebasejs/5.8.2/firebase-app.js"></script>
	<script src="https://www.gstatic.com/firebasejs/5.8.2/firebase.js"></script>
	<script src="js/initializeFirebase.js"></script>
	<!-- <script src="https://code.jquery.com/jquery-2.2.0.min.js"></script> -->
	<!-- <script src="https://checkout.stripe.com/checkout.js"></script> -->
</head>

<body>
	<div class="wrapper">
		<header>
			<div class="container">
				<div class="header-data">
					<div class="logo">
						<a href="home.html" title=""><img src="images/logo.png" alt="" style="height: 34px;"></a>
					</div>
					<!--logo end-->

					<div class="search-bar">
						<form>
							<input type="text" name="search" placeholder="Search...">
							<button type="submit"><i class="la la-search"></i></button>
						</form>
					</div>
					<!--search-bar end-->

					<nav>
						<ul>
							<li>
								<a href="home.html" title="">
									Home
								</a>
							</li>
							<li>
								<a href="" title="">

									Categories
								</a>
								<ul>
									<li>
										<a href="home.html">Mathematics</a>
									</li>
									<li>
										<a href="category=Computer_Science.html">Computer Science</a>
									</li>
									<li>
										<a href="category=Science.html">Science</a>
									</li>
								</ul>
							</li>

							<li>
								<a href="#" title="" class="not-box-open">
									Chat
								</a>
							</li>
							<li>
								<a href="#" id="notification" class="not-box-open">
									Notification
								</a>
								<div class="notification-box msg">
										<div class="nt-title">											
											<a class="clear-notif" href="#" title="">Clear all</a>
										</div>
										<div class="nott-list">
											<div class="notification-details">										
												<div class="notification-info">												
												</div>										
											</div>
																				
										</div><!--nott-list end-->
									</div><!--notification-box end-->
							</li>
						</ul>
					</nav>
					<div class="menu-btn">
						<a href="#" title=""><i class="fa fa-bars"></i></a>
					</div>
					<div class="user-account">
						<div class="user-info">
							<a href="#" id="userName"></a>
							<i class="la la-sort-down"></i>
						</div>

						<div class="user-account-settingss">

							<h3>Profile</h3>
							<ul class="us-links">
								<!-- <li><a href="profile-account-setting.html" title="">Account Setting</a></li> -->
								<li><a href="#" title="">Privacy</a></li>
								<li><a href="#" title="">Faqs</a></li>
								<li><a href="#" title="">Terms & Conditions</a></li>
							</ul>
							<h3 class="tc"><a href="index.html" onclick="logOut();" title="">Logout</a></h3>
						</div>

					</div>
				</div>
			</div>
		</header>

		<main>
			<div class="main-section">
				<div class="container">
					<div class="main-section-data">
						<div class="row">
							<div class="col-lg-3 col-md-4 pd-left-none no-pd profile-block">
								<div class="main-left-sidebar no-margin">
									<div class="user-data full-width">
										<div class="user-profile">

											<div class="user-specs">
												<h3 id="usernameID"></h3>

												<span>LSU Student</span>
											</div>
										</div>

										<ul class="user-fw-status">
											<li>
												<h4>Upvotes</h4>
												<span id="userRank"></span>
											</li>
											<!-- <li>
												<a href="#" title="">View Profile</a>
											</li> -->
										</ul>
									</div>
								</div>
							</div>
							<div class="col-lg-6 col-md-8 no-pd">
									<div class="main-ws-sec">
											<div class="posts-section" id="posts-section">
											<div class="post-bar company-title">
												<center>
													<h3 id="pageTitle">Account Settings</h3>
												</center>
											</div>
											<div class="post_topbar">
												<li><input id="newPass" placeholder="Enter new password" required></li>
												<li><a type="button" id="changePass">Change Password</button></li>
											</div>

											</div>
										</div>
									</div>
								</div>
						</div>
					</div>
				</div>
			</div>
		</main>

<script>
document.getElementById('changePass').addEventListener('click', function(e) {
	var newPassword = document.getElementById('newPass').value;

	var user = firebase.auth().currentUser;
	user.updatePassword(newPassword).then(function() {
		alert("Password changed to: " + newPassword);
	}).catch(function(error) {
		alert(error);
	});
});
</script>		

<script type="text/javascript" src="js/jquery.min.js"></script>
<script type="text/javascript" src="js/popper.js"></script>
<script type="text/javascript" src="js/bootstrap.min.js"></script>
<script type="text/javascript" src="js/jquery.mCustomScrollbar.js"></script>
<script type="text/javascript" src="lib/slick/slick.min.js"></script>
<script type="text/javascript" src="js/scrollbar.js"></script>
<script type="text/javascript" src="js/script.js"></script>
<!-- <script type="text/javascript" src="js/notifications.js"></script> -->

<!-- Re-using important bits of functions.js -->
<script>
firebase.auth().onAuthStateChanged(function (user) {
	if (user) {
		var uid = firebase.auth().currentUser.uid;
    	var displayName = firebase.auth().currentUser.displayName;
		var currUser = firebase.database().ref("Users/" + uid).once('value',
		function (data) {
			document.getElementById('userRank').innerText = data.val().Rank;
		}, function (error) { console.log(error); }
		);
	}
	else {
		uid = null;
		displayName = 'Anonymous';
	}
});
</script>
<!-- <script src="js/update.js"></script> -->

<script>
	/***********************************************************************
	 * Update top left div to display current user's profile name		   *
	 * Update top right drop-down menu to have user's profile name as well *
	 ***********************************************************************/
	firebase.auth().onAuthStateChanged(function (user) {
		if (user)
			document.getElementById("usernameID").innerText = firebase.auth().currentUser.displayName, document.getElementById("userName").innerText = firebase.auth().currentUser.displayName;
		else
			window.location = "index.html";
	});

	/***********************************************************************
	 * Logout the current user											   *
	 ***********************************************************************/
	function logOut(){
		firebase.auth().signOut().then(function() {alert("Logout Successful.")}).catch(function(error){alert("An Error Occured.")});
	}
</script>

</body>
</html>