// CHARGES API
// Set your secret key: remember to change this to your live secret key in production
// See your keys here: https://dashboard.stripe.com/account/apikeys
var stripe = require("stripe")("sk_test_LEoxihDqCYeW1QVhG6shShQn00BFRodwbs");

stripe.charges.create({
  amount: 1000,
  currency: 'usd',
  source: token.id,
}, {
  stripe_account: '{{CONNECTED_STRIPE_ACCOUNT_ID}}',
}).then(function(charge) {
  // asynchronously called
});

//PAYMENTINTENTS API
// Set your secret key: remember to change this to your live secret key in production
// See your keys here: https://dashboard.stripe.com/account/apikeys
var stripe = require("stripe")("sk_test_LEoxihDqCYeW1QVhG6shShQn00BFRodwbs");

(async () => {
  const paymentIntent = await stripe.paymentIntents.create({
    amount: 1099,
    currency: 'usd',
    source: '{{SOURCE_ID}}',
    payment_method_types: ['card']
  }, {
    stripe_account: "{CONNECTED_ACCOUNT_ID}"
  });
})();
